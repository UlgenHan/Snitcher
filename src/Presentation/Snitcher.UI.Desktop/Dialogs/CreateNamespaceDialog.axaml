<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:Snitcher.UI.Desktop.ViewModels"
        xmlns:models="clr-namespace:Snitcher.UI.Desktop.Models.WorkSpaces"
        xmlns:ic="clr-namespace:FluentIcons.Avalonia;assembly=FluentIcons.Avalonia"
        x:Class="Snitcher.UI.Desktop.Dialogs.CreateNamespaceDialog"
        x:DataType="vm:CreateNamespaceViewModel"
        Title="Create New Namespace"
        Width="500" Height="500"
        CanResize="False"
        WindowStartupLocation="CenterOwner">

    <Grid Background="#121212" RowDefinitions="Auto,*,Auto">
        <!-- Header -->
        <Border Grid.Row="0" Background="#181818" Padding="24,16">
            <Grid ColumnDefinitions="Auto,*">
                <Border Grid.Column="0"
                        Background="#FF6B35"
                        CornerRadius="50"
                        Width="48" Height="48"
                        VerticalAlignment="Center">
                    <TextBlock Text="ðŸ“Š"
                             FontSize="24"
                             Foreground="White"
                             HorizontalAlignment="Center"
                             VerticalAlignment="Center"/>
                </Border>
                <StackPanel Grid.Column="1" Margin="16,0,0,0" VerticalAlignment="Center">
                    <TextBlock Text="Create New Namespace"
                             FontSize="20"
                             FontWeight="Bold"
                             Foreground="White"/>
                    <TextBlock Text="Organize your project components"
                             FontSize="14"
                             Foreground="#B3B3B3"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Content -->
        <StackPanel Grid.Row="1" Spacing="24" Margin="24,16">
            <!-- Workspace Selection -->
            <StackPanel Spacing="8">
                <TextBlock Text="Workspace"
                         FontSize="14"
                         FontWeight="Medium"
                         Foreground="White"/>
                <ComboBox ItemsSource="{Binding AvailableWorkspaces}"
                         SelectedItem="{Binding SelectedWorkspace}"
                         FontSize="14"
                         Padding="12,8"
                         Background="#282828"
                         Foreground="White"
                         BorderBrush="#404040"
                         BorderThickness="1">
                    <ComboBox.ItemTemplate>
                        <DataTemplate DataType="models:Workspace" x:DataType="models:Workspace">
                            <StackPanel Orientation="Horizontal" Spacing="8">
                                <TextBlock Text="ðŸ“"
                                             FontSize="16"
                                             VerticalAlignment="Center"
                                             Foreground="#E22828"/>
                                <TextBlock Text="{Binding Name}"
                                         VerticalAlignment="Center"/>
                            </StackPanel>
                        </DataTemplate>
                    </ComboBox.ItemTemplate>
                </ComboBox>
            </StackPanel>

            <!-- Parent Namespace Selection -->
            <StackPanel Spacing="8">
                <TextBlock Text="Parent Namespace"
                         FontSize="14"
                         FontWeight="Medium"
                         Foreground="White"/>
                <ComboBox ItemsSource="{Binding AvailableNamespaces}"
                         SelectedItem="{Binding ParentNamespace}"
                         FontSize="14"
                         Padding="12,8"
                         Background="#282828"
                         Foreground="White"
                         BorderBrush="#404040"
                         BorderThickness="1">
                    <ComboBox.ItemTemplate>
                        <DataTemplate DataType="models:Namespace" x:DataType="models:Namespace">
                            <StackPanel Orientation="Horizontal" Spacing="8">
                                <TextBlock Text="ðŸ“Š"
                                             FontSize="16"
                                             VerticalAlignment="Center"
                                             Foreground="#FF6B35"/>
                                <TextBlock Text="{Binding FullName}"
                                         VerticalAlignment="Center"/>
                            </StackPanel>
                        </DataTemplate>
                    </ComboBox.ItemTemplate>
                </ComboBox>
            </StackPanel>

            <!-- Name Input -->
            <StackPanel Spacing="8">
                <TextBlock Text="Namespace Name"
                         FontSize="14"
                         FontWeight="Medium"
                         Foreground="White"/>
                <TextBox Text="{Binding Name}"
                         Watermark="Enter namespace name..."
                         FontSize="14"
                         Padding="12,8"
                         Background="#282828"
                         Foreground="White"
                         BorderBrush="#404040"
                         BorderThickness="1"/>
            </StackPanel>

            <!-- Full Name Input -->
            <StackPanel Spacing="8">
                <TextBlock Text="Full Name (Optional)"
                         FontSize="14"
                         FontWeight="Medium"
                         Foreground="White"/>
                <TextBox Text="{Binding FullName}"
                         Watermark="Enter full namespace name..."
                         FontSize="14"
                         Padding="12,8"
                         Background="#282828"
                         Foreground="White"
                         BorderBrush="#404040"
                         BorderThickness="1"/>
            </StackPanel>

            <!-- Error Message -->
            <Border Background="#2D1B1B"
                    CornerRadius="4"
                    Padding="12,8"
                    IsVisible="{Binding ErrorMessage, Converter={x:Static StringConverters.IsNotNullOrEmpty}}">
                <StackPanel Orientation="Horizontal" Spacing="8">
                    <TextBlock Text="âš "
                             FontSize="16"
                             Foreground="#E22828"
                             VerticalAlignment="Center"/>
                    <TextBlock Text="{Binding ErrorMessage}"
                             FontSize="12"
                             Foreground="#E22828"
                             VerticalAlignment="Center"/>
                </StackPanel>
            </Border>
        </StackPanel>

        <!-- Footer -->
        <Border Grid.Row="2" Background="#181818" Padding="24,16">
            <Grid ColumnDefinitions="*,Auto,Auto">
                <!-- Loading Indicator -->
                <StackPanel Grid.Column="0"
                           Orientation="Horizontal"
                           Spacing="8"
                           VerticalAlignment="Center"
                           IsVisible="{Binding IsLoading}">
                    <ProgressBar IsIndeterminate="True"
                                 Width="16" Height="16"
                                 Foreground="#1DB954"/>
                    <TextBlock Text="Creating namespace..."
                             FontSize="14"
                             Foreground="#B3B3B3"
                             VerticalAlignment="Center"/>
                </StackPanel>

                <!-- Buttons -->
                <Button Grid.Column="1"
                        Content="Cancel"
                        Command="{Binding CancelCommand}"
                        Background="#404040"
                        Foreground="White"
                        BorderThickness="0"
                        Padding="20,8"
                        FontSize="14"
                        CornerRadius="4"
                        Margin="0,0,8,0"
                        IsEnabled="{Binding !IsLoading}"/>

                <Button Grid.Column="2"
                        Content="Create Namespace"
                        Command="{Binding CreateNamespaceCommand}"
                        Background="#FF6B35"
                        Foreground="White"
                        BorderThickness="0"
                        Padding="20,8"
                        FontSize="14"
                        CornerRadius="4"
                        IsEnabled="{Binding !IsLoading}"/>
            </Grid>
        </Border>
    </Grid>
</Window>
